<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TEST USE</title>
</head>
<body>
    <script>
        class Stack{
            constructor() {
                this.data_length = 0;
                this.lastNode = null;
            }
            _createNode(val) {
                const node = {
                    val,
                    nextNode: null,
                    preNode: null
                }
                return node;
            }
            push(data){
                const node = this._createNode(data);
                if (this.lastNode) {
                    node.preNode = this.lastNode;
                    this.lastNode.nextNode = node;
                }
                this.data_length++;
                this.lastNode = node;
            }
            pop(){
                if ( this.data_length === 0 ){
                    return null;
                }
                const node = this.lastNode;
                const last = node.preNode;
                if (last) {
                    last.next = null;
                }
                this.lastNode = last;
                node.preNode = null; //disconect this poped object's binding.
                this.data_length--;
                return node.val;
            }
            size(){
                return this.data_length;
            }
        }
        
        const list = new Stack();
        console.log('size',list.size())
        list.push(5);
        list.push(3);
        console.log('size',list.size())
        console.log(list.pop())
        list.push(4);
        console.log('size',list.size())
        list.push(2);
        console.log(list.pop())
        list.push(1);
        console.log(list.pop())
        console.log(list.pop())
        console.log('size',list.size())
        console.log(list.pop())
        console.log(list.pop())
        console.log('size',list.size())
    </script>
</body>
</html>